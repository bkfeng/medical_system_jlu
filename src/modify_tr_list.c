#include "ms.h"#include <stdio.h>#include <stdlib.h>extern TreatMed tr_m_list[];//诊疗记录  开药extern int tr_m_list_length;//诊疗记录长度extern int tr_m_list_length_new;//新增诊疗记录长度extern CheckUp c_list[];//药品信息extern TreatCheck tr_c_list[];//诊疗记录  检查extern int tr_c_list_length;//诊疗记录长度extern int tr_c_list_length_new;//新增诊疗记录长度extern Medicine m_list[];extern double g_sum;/********** * 编辑诊疗记录 * @param id 诊疗记录id * @return */int modifyTreatList(long long id){    printf("%lld\n",id);    puts("请输入需要进行的操作（1.删除/2.修改）：");    int s = getNum();    int i = 0;    if (id%10000 < 5000){    //判断是否为检查项目        for (i = 0; i <= tr_c_list_length ; ++i) {            if (tr_c_list[i].ID == id){                tr_c_list[i].Flag = 0;                g_sum -= tr_c_list[i].Total;                break;            }        }        if (s == 2){            char temp[20];            tr_c_list[tr_c_list_length].Flag = 1;            tr_c_list[tr_c_list_length].PatientID = tr_c_list[i].PatientID;            puts("请输入检查项目编号：");            stringInput(temp,2,1);            tr_c_list[tr_c_list_length].C_ID = (int)strtol(temp,NULL,10);            puts("请输入数量：");            stringInput(temp,2,1);            tr_c_list[tr_c_list_length].Num = (int)strtol(temp,NULL,10);            tr_c_list[tr_c_list_length].Total = c_list[tr_c_list[tr_c_list_length].C_ID].Unit                    * tr_c_list[tr_c_list_length].Num;//计算总额            g_sum += tr_c_list[tr_c_list_length].Total;//记录到医院总营收中            tr_c_list[tr_c_list_length].ID = (long long)getTime() * 10000 + tr_c_list_length + 1;//生成ID            tr_c_list_length++;        }    } else{        for (i = 0; i <= tr_m_list_length ; ++i) {            if (tr_m_list[i].ID == id){                tr_m_list[i].Flag = 0;                g_sum -= tr_m_list[i].Total;                break;            }        }        if (s == 2){            char temp[20];            tr_m_list[tr_m_list_length].Flag = 1;            tr_m_list[tr_m_list_length].PatientID = tr_m_list[i].PatientID;            puts("请输入药品编号：");            stringInput(temp,2,1);            tr_m_list[tr_m_list_length].M_ID = (int)strtol(temp,NULL,10);            puts("请输入数量：");            stringInput(temp,2,1);            tr_m_list[tr_m_list_length].Num = (int)strtol(temp,NULL,10);            tr_m_list[tr_m_list_length].Total = m_list[tr_m_list[tr_m_list_length].M_ID].Unit                                                * tr_m_list[tr_m_list_length].Num;//计算总额            g_sum += tr_m_list[tr_m_list_length].Total;//记录到医院总营收中            tr_m_list[tr_m_list_length].ID = (long long)getTime() * 10000 + 5000 + tr_m_list_length + 1;//生成ID            tr_m_list_length++;            printf("%lld",tr_m_list[tr_m_list_length].ID);        }    }    return 1;}